#include <M5Cardputer.h>
#include <WiFi.h>
#include <WebServer.h>
#define TELA M5Cardputer.Display
#include "usb.h"

// Configurações do ponto de acesso Wi-Fi
const char* ssid = "M5CardputerAP";
const char* password = "123456789";
IPAddress local_IP(192, 168, 4, 1);
IPAddress gateway(192, 168, 4, 1);
IPAddress subnet(255, 255, 255, 0);

WebServer server(80);

void setup() {
  M5Cardputer.begin();
  Serial.begin(115200);
  TELA.setRotation(1);

  if (!WiFi.softAPConfig(local_IP, gateway, subnet)) {
    Serial.println("Failed to configure the softAP");
  }

  WiFi.softAP(ssid, password);
  Serial.print("Access Point Started. SSID: ");
  Serial.print(ssid);
  Serial.print(", IP Address: ");
  Serial.println(WiFi.softAPIP());

  TELA.fillScreen(BLACK);
  TELA.setCursor(0, 0);
  TELA.setTextColor(WHITE);
  TELA.setTextSize(2);
  TELA.println("M5Cardputer BadUSB");
  TELA.print("IP: ");
  TELA.println(WiFi.softAPIP());

server.on("/", HTTP_GET, []() {
  server.send(200, "text/html",
    "<!DOCTYPE html>"
    "<html>"
    "<head>"
    "<meta name='viewport' content='width=device-width, initial-scale=1.0'>"
    "<style>"
    "body { font-family: Arial, sans-serif; margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; flex-direction: column; }"
    "form { margin: 20px; padding: 20px; border: 1px solid #ddd; border-radius: 5px; }"
    "textarea { width: 90%; max-width: 300px; }"
    "input[type=submit] { margin-top: 20px; }"
    "</style>"
    "</head>"
    "<body>"
    "<center>"
    "<img src='data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gxYSUNDX1BST0ZJTEUAAQEAAAxITGlubwIQAABtbnRyUkdCIFhZWiAHzgACAAkABgAxAABhY3NwTVNGVAAAAABJRUMgc1JHQgAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLUhQICAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFjcHJ0AAABUAAAADNkZXNjAAABhAAAAGx3dHB0AAAB8AAAABRia3B0AAACBAAAABRyWFlaAAACGAAAABRnWFlaAAACLAAAABRiWFlaAAACQAAAABRkbW5kAAACVAAAAHBkbWRkAAACxAAAAIh2dWVkAAADTAAAAIZ2aWV3AAAD1AAAACRsdW1pAAAD+AAAABRtZWFzAAAEDAAAACR0ZWNoAAAEMAAAAAxyVFJDAAAEPAAACAxnVFJDAAAEPAAACAxiVFJDAAAEPAAACAx0ZXh0AAAAAENvcHlyaWdodCAoYykgMTk5OCBIZXdsZXR0LVBhY2thcmQgQ29tcGFueQAAZGVzYwAAAAAAAAASc1JHQiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAABJzUkdCIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAPNRAAEAAAABFsxYWVogAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z2Rlc2MAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkZXNjAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZGVzYwAAAAAAAAAsUmVmZXJlbmNlIFZpZXdpbmcgQ29uZGl0aW9uIGluIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAALFJlZmVyZW5jZSBWaWV3aW5nIENvbmRpdGlvbiBpbiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHZpZXcAAAAAABOk/gAUXy4AEM8UAAPtzAAEEwsAA1yeAAAAAVhZWiAAAAAAAEwJVgBQAAAAVx/nbWVhcwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAo8AAAACc2lnIAAAAABDUlQgY3VydgAAAAAAAAQAAAAABQAKAA8AFAAZAB4AIwAoAC0AMgA3ADsAQABFAEoATwBUAFkAXgBjAGgAbQByAHcAfACBAIYAiwCQAJUAmgCfAKQAqQCuALIAtwC8AMEAxgDLANAA1QDbAOAA5QDrAPAA9gD7AQEBBwENARMBGQEfASUBKwEyATgBPgFFAUwBUgFZAWABZwFuAXUBfAGDAYsBkgGaAaEBqQGxAbkBwQHJAdEB2QHhAekB8gH6AgMCDAIUAh0CJgIvAjgCQQJLAlQCXQJnAnECegKEAo4CmAKiAqwCtgLBAssC1QLgAusC9QMAAwsDFgMhAy0DOANDA08DWgNmA3IDfgOKA5YDogOuA7oDxwPTA+AD7AP5BAYEEwQgBC0EOwRIBFUEYwRxBH4EjASaBKgEtgTEBNME4QTwBP4FDQUcBSsFOgVJBVgFZwV3BYYFlgWmBbUFxQXVBeUF9gYGBhYGJwY3BkgGWQZqBnsGjAadBq8GwAbRBuMG9QcHBxkHKwc9B08HYQd0B4YHmQesB78H0gflB/gICwgfCDIIRghaCG4IggiWCKoIvgjSCOcI+wkQCSUJOglPCWQJeQmPCaQJugnPCeUJ+woRCicKPQpUCmoKgQqYCq4KxQrcCvMLCwsiCzkLUQtpC4ALmAuwC8gL4Qv5DBIMKgxDDFwMdQyODKcMwAzZDPMNDQ0mDUANWg10DY4NqQ3DDd4N+A4TDi4OSQ5kDn8Omw62DtIO7g8JDyUPQQ9eD3oPlg+zD88P7BAJECYQQxBhEH4QmxC5ENcQ9RETETERTxFtEYwRqhHJEegSBxImEkUSZBKEEqMSwxLjEwMTIxNDE2MTgxOkE8UT5RQGFCcUSRRqFIsUrRTOFPAVEhU0FVYVeBWbFb0V4BYDFiYWSRZsFo8WshbWFvoXHRdBF2UXiReuF9IX9xgbGEAYZRiKGK8Y1Rj6GSAZRRlrGZEZtxndGgQaKhpRGncanhrFGuwbFBs7G2MbihuyG9ocAhwqHFIcexyjHMwc9R0eHUcdcB2ZHcMd7B4WHkAeah6UHr4e6R8THz4faR+UH78f6iAVIEEgbCCYIMQg8CEcIUghdSGhIc4h+yInIlUigiKvIt0jCiM4I2YjlCPCI/AkHyRNJHwkqyTaJQklOCVoJZclxyX3JicmVyaHJrcm6CcYJ0kneierJ9woDSg/KHEooijUKQYpOClrKZ0p0CoCKjUqaCqbKs8rAis2K2krnSvRLAUsOSxuLKIs1y0MLUEtdi2rLeEuFi5MLoIuty7uLyQvWi+RL8cv/jA1MGwwpDDbMRIxSjGCMbox8jIqMmMymzLUMw0zRjN/M7gz8TQrNGU0njTYNRM1TTWHNcI1/TY3NnI2rjbpNyQ3YDecN9c4FDhQOIw4yDkFOUI5fzm8Ofk6Njp0OrI67zstO2s7qjvoPCc8ZTykPOM9Ij1hPaE94D4gPmA+oD7gPyE/YT+iP+JAI0BkQKZA50EpQWpBrEHuQjBCckK1QvdDOkN9Q8BEA0RHRIpEzkUSRVVFmkXeRiJGZ0arRvBHNUd7R8BIBUhLSJFI10kdSWNJqUnwSjdKfUrESwxLU0uaS+JMKkxyTLpNAk1KTZNN3E4lTm5Ot08AT0lPk0/dUCdQcVC7UQZRUFGbUeZSMVJ8UsdTE1NfU6pT9lRCVI9U21UoVXVVwlYPVlxWqVb3V0RXklfgWC9YfVjLWRpZaVm4WgdaVlqmWvVbRVuVW+VcNVyGXNZdJ114XcleGl5sXr1fD19hX7NgBWBXYKpg/GFPYaJh9WJJYpxi8GNDY5dj62RAZJRk6WU9ZZJl52Y9ZpJm6Gc9Z5Nn6Wg/aJZo7GlDaZpp8WpIap9q92tPa6dr/2xXbK9tCG1gbbluEm5rbsRvHm94b9FwK3CGcOBxOnGVcfByS3KmcwFzXXO4dBR0cHTMdSh1hXXhdj52m3b4d1Z3s3gReG54zHkqeYl553pGeqV7BHtje8J8IXyBfOF9QX2hfgF+Yn7CfyN/hH/lgEeAqIEKgWuBzYIwgpKC9INXg7qEHYSAhOOFR4Wrhg6GcobXhzuHn4gEiGmIzokziZmJ/opkisqLMIuWi/yMY4zKjTGNmI3/jmaOzo82j56QBpBukNaRP5GokhGSepLjk02TtpQglIqU9JVflcmWNJaflwqXdZfgmEyYuJkkmZCZ/JpomtWbQpuvnByciZz3nWSd0p5Anq6fHZ+Ln/qgaaDYoUehtqImopajBqN2o+akVqTHpTilqaYapoum/adup+CoUqjEqTepqaocqo+rAqt1q+msXKzQrUStuK4trqGvFq+LsACwdbDqsWCx1rJLssKzOLOutCW0nLUTtYq2AbZ5tvC3aLfguFm40blKucK6O7q1uy67p7whvJu9Fb2Pvgq+hL7/v3q/9cBwwOzBZ8Hjwl/C28NYw9TEUcTOxUvFyMZGxsPHQce/yD3IvMk6ybnKOMq3yzbLtsw1zLXNNc21zjbOts83z7jQOdC60TzRvtI/0sHTRNPG1EnUy9VO1dHWVdbY11zX4Nhk2OjZbNnx2nba+9uA3AXcit0Q3ZbeHN6i3ynfr+A24L3hROHM4lPi2+Nj4+vkc+T85YTmDeaW5x/nqegy6LzpRunQ6lvq5etw6/vshu0R7ZzuKO6070DvzPBY8OXxcvH/8ozzGfOn9DT0wvVQ9d72bfb794r4Gfio+Tj5x/pX+uf7d/wH/Jj9Kf26/kv+3P9t////2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCACeASwDASIAAhEBAxEB/8QAHAAAAgIDAQEAAAAAAAAAAAAAAwQCBgABBQcI/8QAOxAAAgIBAgMDCQYGAgMBAAAAAQIAAxEEIQUSMQZBURMiMlJhcYGRwQcUI0KhsTNicpLR4VOCFUNEc//EABoBAAIDAQEAAAAAAAAAAAAAAAECAAMEBQb/xAAsEQACAgECBQMDBAMAAAAAAAAAAQIDESExBAUSQVETMmEiQrEjNHGRgaHB/9oADAMBAAIRAxEAPwDyYCEUSIEmokOrBE1EIokFEKogNlaOrwirS6hzVfgE9M983r9D9yvxU/Mh6eInOTOdo2rWWDz2Le+KdCDTjjBiDm3MZrXEgiYh0EBohHARBkxhFkK12h1WKXpG1G8f0a1MjK/X94oiwo2ijpGnQK5AORnaaxNllHUiRNqDxkDlEbW8nWXxkjoPE90rfHNRylNKGzy+c58SZ3NVqVCtYdkpHOfae6U3U3tfe9rndjmWQWuTlcwuSj0ruMcJTy3FKF7g3MfhvLjKr2eVjxBnVebkrP67SyGy3HofpBPcPLtKm/LCzWILylv/ABzPK2DrXEOj1ILOfxZOapf5gyfpn6Rvy570MV4laH0ZODlWU/T6wrcpuadbKiGIPulp4NrPvGl8mT59Y+YlUc/iN749wnVfd9ahJ80nB93fLpLKPP8AB3+nb8Mt2JqS6yFjCtGY7ASpHpxbVudqaz57/oPGF0ulyBWuyqNzGNJTQmkbUW+dfb0HqjuEGcgEA4z1hyJFZfUxe1ArkKcjxgHGIyTynI6iL2bnMKJJCziCCBmwSAPEwzwDwmWaF7ABsIu0YeAaFGCxAmgjCsQBuYEtn0QTGME2kRMhzDxkipPpH4CaxIZXk6pq0raUFWxbnpFuTlg1z4wqwYwdLqU+2DaiEWREKiyF8IhakyY2gxAVbRhTtEN1awFEKggV3h6wT0gL0xhCAIVX8BB11E9Y1XUB3RS2KbIr5RukItDN6RhkQSYGIo6j5BDTL35M35KtQSVAA6mGivEH5dIyg72EIPj1/TMgXiKbK7xzVcujVBs2oYuR7O76SuEzo8bv8tryo9GsBROaZoisI8rxdnXa/jQ7/ZRc3apvBVH6mWMyvdkvT1Y/lX9zLFKp+47nLv20f8/kjMxJTIhvwRxFOJoDw3UHvCZjLW1r1cRPiOpRuHahVDHKEZxCim5r05fwyksfPPvkkcqwYdQcyLek3vM0NppPFJ4ZdOH2vfo1dWzjaSsdrLAjDzV3acvgFnlK2rLkYHQHrj/RnbTRoq5Ykk7neUvRnrOHk7ak0aF9fTOJFr6x+bML92qA2QQTadR6IgNP1gXuB6Axd7CfymN+TcnAXMFYOXY9Ywry+4i7P6sC/lD4Rx8QLiEzzj8iRrdju2I7o9NpRWxvOT7YBtoFuY98m5mwovOMgtQtYsYINs7Rcw7rysRkH2iBIjo59q1BmRxCMhAB8ZCQyyi0HAk1kRJLAbIBUEOggVhkBMBtrQVYetSYOtI3UuIrNkItk6qto5WgEHWsZrWIzTGKRNF2h0E0iQoGIC1IkoksTK15mxnEkyFGwd4AmpzOK2AWVJ6oZz+w/czpyvcavxbqWB9BAg+RJ/eFblPES6YFT1FnlL7HP5mJgpszQmk8e3l5O32YuWnWXKx2av8AYyyeWdvQqPvO0qfALBVxejPRyUPxEumJRPc9Hy1t0YzsxcLeerKvuE35LI85mb9IbEzEQ6XSgIprXoginFyE4ZaPWwP1nQxOT2hs5dIieJLH4D/cMdyniGo0yfwU1tyZqTYSBmk8VJHV4BcK9aoPQkf4+suWJQeHsV1Yx3gy+VP5SpX9ZQZTPc9HymeanHwYYNoUwbCKdYHz8mcCK3LzEkxlhBOMwoVrKEHUiBY+MdcRWxBvGRnnHGws24gWEM6kQTRjHMAwgzDNBkQoxTQJt5CEIkcQmRoKJJYNTmHrEBpr1YWtYzWsCgh0gOlXEPWI1WIvXGaxFZughmsRmsYgKxtGEERlyGEkxAhwo3MwWPZtWPiYAtpDBdUGWIEH94ZzipC/t7piaYZzYeY+2HAAG0BNWAFFln8Ww49VZU+M2KiahV6NawHzx9JdO8Tz7i1vMVHjlvmTHhqzncwl0VnMM2JGbBl55nOoelzVYti+kjBh8JfqrFuqS1N1dQw+M8+Uy1dnNcLdMdI7efXuntX/AFK7Fpk7XLLVGbg+52ZklMxKD0BGVntHqA2oNYPogL9T9JYtVqE0mne5+ijYeJ7hKNq72vuZ2OSSZZWtcnL5laow6FuxVtjIu/N3ATbGDl55ecuwxoTjWV+/EvHDznQVZ7lx8tpRNMcams/zCXnhR5tFjwYiVTO1yd+5DJkWhMSJErR3gJHWBYR+v7uKybAS3cIo43OIwBRxFrBHHEWsEKK5IVdYs6xtxAOIxjsiKtBmHYQLKYxgsjgGRISZ26yGV8YTJLQIoEMkVVrG6ACFVLT/AOzHuEBZVPwhxIdIilDHrc/wh00oPW23+6A6Fc59onQrjlIB75yU0a/81395hl0o7r7/AO8xWbIzmvt/2doAKPSmxYWOFGZzK9BY/wD9dw/7RqvQalP4euf/ALKDFLVKb+38HQrpzu5zG0AA2E5a1cTT0dRS/wDUhH7GFFvFEG9FFn9LkfuIMFikl2Z0RJTnDX6tP4vD7PejBpv/AMxp1/i131f11GDDD6ke4855a2PgDPOeInNq/wBAl7PEtFfU4r1NRJU7cwB6Sha45dP6BHr3OVzSScFhiZMwGaM1mXHm28BVaHovei1ba2KupyCImGhA0hbCzDLfou0emtQLqvwX7yBlT/iNW8d4dUhYajyh7lQEkykB5nPK/TR1o80tUcaM6nE+L269+nJWPRTPT/c5bNIl5AtHSwcy6+Vjbk9TGMhmYTI5hMbkH0296e+XnhGPuZ/q+glG0e+oWXXghJ01n/6bfISuex3eTvVnSkCJORxKj0bIEQZQnOIYwbQoUWsXELpb9FQh8vVzN/TmCsitkYRkNZZXbczVryr4RJxGHi7wmWwCxI6QLsfGGeAcxzDZogL79YLAhWGZHkHhCc6abZuuMJ0i1cYSAvpDpDqcSOm0zXNyiTelkYqSNop0YJpZJqxOwjdC95itQAjdZgZrrWdx2uNIYnUY1WdorNKGUhVMAhhVMAwSZgY6TQM3FCCt0emvGLaK3z6ygzzzXpy2hfVBX5HE9IlD49R5HiNy9wsJHuO/1lle5yeaQ/TUkcdhBmMcuRBsuJbk81ODBzYMxjtiQzCUbBOaa5pDMzMgeokWmsyMyQXLNkzUzEyQUZ0AzqB7pfeFVImhBX8xJ+n0lF0H8QnHQZMvmhqNOiqrPUIM+/vlUz0vJ1o2MSM3MMrO+QMGwI6giEJkLLnKFCdoUKKX7d8UPWM27xZjiMiuQJ+kWeMO20VsbEYy2MC5xANCMcwZGYxzrHkhMmzInrCZmaTaFVsCABxCLvACuWNhmu6zmyrEQyZLcxYnMXTaMIYDfWs7jFcZrMVQxiuKdCsdqMbridAydo6i8vfFNKDpCrBLCAxR0EKsu5GJmZEuW6kmYDmQhLMq/arSE6hNQo2dMH3r/r9pZ4nxTTfetC6qMunnr7x/rMkXhlHE1erU4lU7O8JHG+OaXh3PyC9wpbwE9ur+yDskumFVmkusfG9nlmB/SeN9nrxwvtToNTnCC5Tn2Ez6bRg6Bh0IyJejyPFdUMJHiHbT7G7+GaWziHZ623WU1jms0tgzYo8VI9L3dffPKjtPsafPv2x9lK+B9oE4no6wml4jlmRRgJaPSx7+vzhMSeTzmZMmoRMm53+y/Yrjfa65k4Zph5Ks4s1Fp5a09me8+wZMzsT2Wu7Xdo6eGoSlI/E1FoHoVjr8T0Hvn0/w3hmj4Rw+nQaDTpRp6V5URBsP8nxPfAE8cX7B9WtGbOOVG3HopQeX5kzzjj/BNR2f4vbw7VEGyo9V6GfWTbDM+YvtB1Q1nbXiNinKizlB90hdHEoPQ5vBqBdeiNgB3APuG5l47tpXOz3Dq79K9t9YZfRUHx7z9J1fuN1O+l1LqPUfzh/mVSeWeq5fXKqlPG49IkxL77fRtqdOcevX5w+XWGr1VN4zXYrfGLg6Csi9CbGBcybNtF3aREbBWN1iznrCWNF3YY6x0UyYKxos+TCs28Kl1RGHWExy+p7iBEido3d5IjKxNu+MjJYsEDITbQW8JinIwEEwq2KNswQTPUwigDoJBYOSCrae5SYZHs7lHzg0Ih0MB0KsvuER7fVHzjFdlmfQ/WCQxitsRTdWvkdQvWgZhgGMValSdzE0sLDcxmsAxTYs9h5LAR1hgYoiKFyDgwilx7YhYmMAzYMGrZksyDImDNweZINAQqvHdIdJqedNkY86Edx7xPdewHH6+Pdl9Nbzhr6VFVwzuCJ5Hx5aTwqxrs+bupA3BnM7EdsdR2T4sLxzWaWzzb6geo8R7RLoPTJ5rmVKU8LvqfS4lH+17hS8R7B6q3lzZo2W5D4YOD+hMsvBO0HC+0GjXU8N1ddysN1B85fYR1EX7Z1C7sfxSsjIOmb9o5woxamkz5Smpk1IVnvX2GcEGk7Oani7r+JrbeVT/Im375nqBla+zrTrpuwfCa1GPwA3xO/1nY4pxbQcG0b6viGqr09SDJLnGfcO+RFkk+rCEe1nG6uAdntVrrHClUIQE9WPSfM1a28T4iznzrLrCd/En6Sx/aD26s7W8R5NOWTh9B/CQ7cx9YxLsrXSzW2EjyyjAXwHeYreFk6PB0qyyNf9lh01CaXTpRX6KDHvkyZhMgTKD16SSwjDFL9FRaebl5W9ZdjHbGqKApkN3iLO0KFkk9xB01mn/h2i5fB9j84BuIqDy3I1R/mG3zjltoUHec+6zy2QAMeJjoyTbj7X/wBNWahWHmnOfCCKu28EdIg3QlD4gzS26nTnutHyMYzOcvvX9EyCOsGxmNra3OGHI3gwxIFh3GFFbsi9maJg2MkTIsjYziEzTbewFjIZm2yOsjCYZPUmJMQQMmDIPFhRtCo8Cpk1gNUJeBut4dGiK5EMlhHWA3V2eToVtGannOSyM12Dxis2wmjpVvDq059dntjCWe2K0Xpjow02Mj3QNdnjGrLUZQqDAEUYjmZmRzMzAEy6pNRS1VgyrDBEovFeH2cN1RQ7od1bxEvYaJ8U0KcQ0jVkDmG6nwMaEsGLjeFV9enuWxRaNXfprBbpr7KbB+atyp+Yjep7Tce1elbS6jjOutobrW97EH37zn31PRc1bjDKcQWcS88fOUk8M1NYm8zISg72i7cdqOH6FNDpON6unT1jlRFf0R4DwnM1nE9dxK0267WX6l/WtsLfvFBCIhZgoGSeggLF1PQlVW9rqiKWZjgAd8uXA+Ctw/8AHvbNzDHKOij/ADB8D4bRw+oX3Mp1DD+0eE6p1VfryqUs6I9PwHBRqSss934CWHJgyYNtVUO/9ItbxGpdlyx8AImDqysit2MO4URG/VgEomXbwEFZdZf6ZKJ4DqZENXUMKpEZIzStzsQZXsObTn+UdBItgCY+oA7jF21CnxjYKnOK7k2aCZpBrgYM2qe+MkUSsXk24VhhgD74uaeXetyvs6iFLg98iTmEyWdMgJssT0lyPESVes5T1+BmmJgmUHqMwmRynF/Sw73JbuVwfZFzjO0gUx6JImvO8ZCmdrlugoMkDICSEgYsKpk1MEDJqZDTCQdDGKyig8y8xxt7IvWuRknaEBwYpvregcDMIo9sCp2hVO0hpjgMhYdDDpbYIurQyNFL0MJqHH5YZdU/qxZWIhleKWLPkMNU/qTPvFvqSAbMmHgG18m/L3ep+kzyupP5QPhN+UwpJ7pX+JdpLVZqdKnIRsXbc/CRLJTfdCiPVNi/aSlVvWxiosbqonCMJbbZc5sscux6kmDl6WEeQ4q1W2uaWMmTYmpuQzmwJYOzej091jW2HLr6KyviPcN1L6a8Ohga0N3BTjC5OSyi6mqlRk/vF3uqzy1V87eyarqN6Cy1y2d+UbCGAVBhVAHslJ67fYXXSvcfxCEHqr/mSFFVQwqD3wpaCZpNQdMUQYL4D5QD8vgJN2gHYxhJNArAItYB4CGds5i1jRkZLGgZkGVT1E2WkGbaMYpNEGRe7aDy6nIb5wwTnGxxBsuDiEyzjjVDFNtJqYXLlseaRFbAAdjMMg24wZELOxuOGaMjmROV3ByPAzA2RmQx9Wp//9k='"
    "<p><h1>Cardputer BadUSB Web:</h1>"
    "<form action='/command' method='POST'>"
    "Comandos:<br><textarea name='command' rows='5'></textarea><br>"
    "<input type='checkbox' id='winR' name='winR' value='true'>"
    "<label for='winR'>Iniciar com Win+R?</label><br>"
    "<input type='checkbox' id='multiCmd' name='multiCmd' value='true'>"
    "<label for='multiCmd'>Multiplos Comandos (separados por nova linha)</label><br>"
    "<input type='submit' value='Enviar'>"
    "</form>"
    "<p>"
    "<a href='https://github.com/eversonpereira'>GitHub Everson Pereira</a>"
    "</center>"
    "</body>"
    "</html>");
});



  server.on("/command", HTTP_POST, []() {
    String command = server.arg("command");
    bool useWinR = server.hasArg("winR");
    bool multiCmd = server.hasArg("multiCmd");
    if (!command.isEmpty()) {
      Serial.println("Received command: " + command);
      enviaComando(command, useWinR, multiCmd);
      server.send(200, "text/plain", "Command received: " + command);
    } else {
      server.send(200, "text/plain", "No command received.");
    }
  });

  server.begin();
}

void loop() {
  server.handleClient();
}
